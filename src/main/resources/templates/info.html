<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>on Me</title>
    
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    
    <link href="http://cdn.jsdelivr.net/webjars/bootstrap/3.3.4/css/bootstrap.min.css"
          th:href="@{/webjars/bootstrap/3.3.4/css/bootstrap.min.css}"
          rel="stylesheet" media="screen" />
 
    <script src="http://cdn.jsdelivr.net/webjars/jquery/2.1.4/jquery.min.js"
            th:src="@{/webjars/jquery/2.1.4/jquery.min.js}">
    </script>
            
    <script type="text/javascript" 
    		src="../static/js/jquery.qrcode.js"
    		th:src="@{js/jquery.qrcode.js}"></script>
    		
	<script type="text/javascript" 
			src="../static/js/qrcode.js"
			th:src="@{js/qrcode.js}"></script>
			
<!-- 	<link rel="stylesheet" type="text/css" href="../static/css/infostyle.css" th:href="@{/static/css/infostyle.css}"/> -->
	<!-- <style>
	
	#qrcodeTable {
		text-align: center;
	}
	</style>
 -->
</head>

<body style="background-color: #752bab">

<div class="container" style="margin: auto; padding: 20px; padding-bottom: 0px">

    <div class="jumbotron" style="border: 20px solid white; padding-bottom: 0px">
        <img src="../static/images/ebayonMe.png"
             th:src="@{images/ebayonMe.png}"
             style="width:100%;height:100%;"/>
             
        <!-- <h1>QR Code</h1>
    	<p th:text= "'TID that will be turned into QR Code: ' + ${info.tid}" />
    	
    	<h1>Google Maps Integration</h1>
    	<p th:text="'Gift Pickup Lat: ' + ${info.lat}" />
    	<p th:text="'Gift Pickup Lon: ' + ${info.lon}" />   -->
    	
    	<h1>John Pyun sent you a gift!</h1>
    	
    	<h2> Message: </h2>
    	<h3> <i> Happy 21st Birthday! Sorry I'll be unable to join your party tonight, but here's a drink on me. </i> </h3>
    	<br></br>
    	
    	<h2> To redeem your gift, show the QR Code below to the merchant: </h2>
    	
    	<div id="qrcodeTable" style="margin: auto; padding: 20px; padding-top: 0px"></div>
    	
    	<h2>Gift Venue: 199 Fremont St. San Francisco, CA </h2>
    	
    </div>
	
	<script th:inline="javascript">
		
		/*<![CDATA[*/
		                        
  		$(document).ready(function() {
  			initMap();
  		});
  		
  		function initMap() {
  			var tid = /*[[${info.tid}]]*/;  
  			
  			jQuery('#qrcodeTable').qrcode({
  	      		render    : "table",
  	      		text    : 'TID: ' + tid
  	  		});

  			navigator.geolocation.getCurrentPosition(success);
  		}
  		
  		function success(position) {
  		    var pos = {
  		       lat: position.coords.latitude,
  		       lng: position.coords.longitude
  		     };
  		 var chicago = {lat: 41.85, lng: -87.65};
  		 var indianapolis = {lat: 39.79, lng: -86.14};
  		 chicago = pos;

  		 var map = new google.maps.Map(document.getElementById('map'), {
  		   center: chicago,
  		   scrollwheel: false,
  		   zoom: 7
  		 });

  		 var directionsDisplay = new google.maps.DirectionsRenderer({
  		   map: map
  		 });

  		 // Set destination, origin and travel mode.
  		 var request = {
  		   destination: indianapolis,
  		   origin: chicago,
  		   travelMode: google.maps.TravelMode.DRIVING
  		 };

  		 // Pass the directions request to the directions service.
  		 var directionsService = new google.maps.DirectionsService();
  		 directionsService.route(request, function(response, status) {
  		   if (status == google.maps.DirectionsStatus.OK) {
  		     // Display the route on the map.
  		     directionsDisplay.setDirections(response);
  		   }
  		 });
  		}
  		
  		/*]]>*/
  		
	</script>
	
	
	<script
	src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDGtEuBJThKB9r7R0wEpjT4e-fxK5W1_IE" >
	</script>
	
</div>


	
	
	<div id="map" style="margin: auto; padding: 20px;"></div>

	<div class="container" style="padding-top: 30px">
 		<button type="button" 
 				class="btn btn-lg btn-info center-block" 
 				style="font-size: 40px; margin: auto"> Download our app to send a gift back! </button>
	</div>
   
</body>

</html>

